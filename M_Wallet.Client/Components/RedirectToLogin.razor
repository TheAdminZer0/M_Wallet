@inject NavigationManager Navigation
@using M_Wallet.Client.Components

@* Redirect helper to send users to login preserving return URL *@
<SplashScreen Text="Checking access..." />

@code {
    // Redirect to login unless already there, preserving return URL
    protected override void OnInitialized()
    {
        var uri = Navigation.Uri;
        // If we are not already on the login page, redirect to login with the return URL
        if (!uri.Contains("login", StringComparison.OrdinalIgnoreCase))
        {
            var returnUrl = Uri.EscapeDataString(uri);
            Navigation.NavigateTo($"login?returnUrl={returnUrl}");
        }
    }
}
